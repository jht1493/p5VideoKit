const fs = require('fs-extra');
const path = require('path');
const Delaunay = require('faster-delaunay');

function write_it(pa, obj) {
  let np = path.join(__dirname, pa);
  fs.writeJsonSync(np, obj, { spaces: 2 });
}

let mesh_nits = [
  234, 127, 227, 93, 234, 137, 132, 93, 177, 58, 132, 215, 172, 58, 215, 136,
  172, 138, 150, 136, 169, 149, 150, 170, 176, 149, 140, 148, 176, 171, 152,
  148, 175, 377, 152, 175, 400, 377, 396, 378, 400, 369, 379, 378, 395, 365,
  379, 394, 397, 365, 367, 288, 397, 435, 361, 288, 435, 323, 361, 401, 454,
  323, 366, 356, 454, 447, 389, 356, 264, 251, 389, 368, 284, 251, 301, 332,
  284, 298, 297, 332, 333, 338, 297, 299, 10, 338, 337, 109, 10, 108, 67, 109,
  69, 103, 67, 104, 54, 103, 68, 21, 54, 71, 162, 21, 139, 127, 162, 34, 227,
  127, 34, 234, 227, 137, 93, 137, 177, 132, 177, 215, 172, 215, 138, 136, 138,
  135, 169, 136, 135, 150, 169, 170, 149, 170, 140, 176, 140, 171, 148, 171,
  175, 377, 175, 396, 400, 396, 369, 378, 369, 395, 379, 395, 394, 365, 394,
  364, 367, 365, 364, 397, 367, 435, 361, 435, 401, 323, 401, 366, 454, 366,
  447, 356, 447, 264, 389, 264, 368, 251, 368, 301, 284, 301, 298, 332, 298,
  333, 297, 333, 299, 338, 299, 337, 10, 337, 151, 108, 10, 151, 109, 108, 69,
  67, 69, 104, 103, 104, 68, 54, 68, 71, 21, 71, 139, 162, 139, 34, 227, 34,
  116, 137, 227, 123, 177, 137, 147, 215, 177, 213, 138, 215, 213, 135, 138,
  192, 169, 135, 210, 170, 169, 211, 140, 170, 32, 171, 140, 208, 175, 171, 199,
  396, 175, 199, 369, 396, 428, 395, 369, 262, 394, 395, 431, 364, 394, 430,
  367, 364, 416, 435, 367, 433, 401, 435, 433, 366, 401, 376, 447, 366, 352,
  264, 447, 345, 368, 264, 372, 301, 368, 383, 298, 301, 300, 333, 298, 293,
  299, 333, 334, 337, 299, 296, 151, 337, 336, 108, 151, 107, 69, 108, 66, 104,
  69, 105, 68, 104, 63, 71, 68, 70, 139, 71, 156, 34, 139, 143, 116, 34, 143,
  227, 116, 123, 137, 123, 147, 177, 147, 213, 138, 213, 192, 135, 192, 214,
  210, 135, 214, 169, 210, 211, 170, 211, 32, 140, 32, 208, 171, 208, 199, 396,
  199, 428, 369, 428, 262, 395, 262, 431, 394, 431, 430, 364, 430, 434, 416,
  364, 434, 367, 416, 433, 401, 433, 376, 366, 376, 352, 447, 352, 345, 264,
  345, 372, 368, 372, 383, 301, 383, 300, 298, 300, 293, 333, 293, 334, 299,
  334, 296, 337, 296, 336, 151, 336, 9, 107, 151, 9, 108, 107, 66, 69, 66, 105,
  104, 105, 63, 68, 63, 70, 71, 70, 156, 139, 156, 143, 116, 143, 111, 123, 116,
  117, 147, 123, 187, 213, 147, 187, 192, 213, 187, 214, 192, 207, 210, 214,
  202, 211, 210, 204, 32, 211, 194, 208, 32, 201, 199, 208, 201, 428, 199, 421,
  262, 428, 421, 431, 262, 418, 430, 431, 424, 434, 430, 422, 416, 434, 427,
  433, 416, 411, 376, 433, 411, 352, 376, 411, 345, 352, 346, 372, 345, 340,
  383, 372, 265, 300, 383, 353, 293, 300, 276, 334, 293, 283, 296, 334, 282,
  336, 296, 295, 9, 336, 285, 107, 9, 55, 66, 107, 65, 105, 66, 52, 63, 105, 53,
  70, 63, 46, 156, 70, 124, 143, 156, 35, 111, 143, 35, 116, 111, 117, 123, 117,
  50, 187, 123, 50, 192, 187, 207, 214, 207, 212, 202, 214, 212, 210, 202, 204,
  211, 204, 194, 32, 194, 201, 199, 201, 200, 421, 199, 200, 262, 421, 418, 431,
  418, 424, 430, 424, 422, 434, 422, 432, 427, 434, 432, 416, 427, 411, 352,
  411, 280, 346, 352, 280, 345, 346, 340, 372, 340, 265, 383, 265, 353, 300,
  353, 276, 293, 276, 283, 334, 283, 282, 296, 282, 295, 336, 295, 285, 9, 285,
  8, 55, 9, 8, 107, 55, 65, 66, 65, 52, 105, 52, 53, 63, 53, 46, 70, 46, 124,
  156, 124, 35, 111, 35, 31, 117, 111, 31, 50, 117, 118, 187, 50, 205, 207, 187,
  205, 212, 207, 216, 202, 212, 57, 204, 202, 43, 194, 204, 106, 201, 194, 182,
  200, 201, 83, 421, 200, 313, 418, 421, 406, 424, 418, 335, 422, 424, 273, 432,
  422, 287, 427, 432, 436, 411, 427, 425, 280, 411, 425, 346, 280, 347, 340,
  346, 261, 265, 340, 261, 353, 265, 446, 276, 353, 342, 283, 276, 445, 282,
  283, 444, 295, 282, 443, 285, 295, 441, 8, 285, 417, 55, 8, 193, 65, 55, 221,
  52, 65, 223, 53, 52, 224, 46, 53, 225, 124, 46, 113, 35, 124, 226, 31, 35,
  226, 117, 31, 228, 118, 117, 228, 50, 118, 101, 205, 50, 36, 207, 205, 206,
  216, 207, 206, 212, 216, 57, 202, 57, 43, 204, 43, 106, 194, 106, 182, 201,
  182, 83, 200, 83, 18, 313, 200, 18, 421, 313, 406, 418, 406, 335, 424, 335,
  273, 422, 273, 287, 432, 287, 436, 427, 436, 426, 425, 427, 426, 280, 425,
  330, 347, 280, 330, 346, 347, 448, 261, 346, 448, 265, 261, 446, 353, 446,
  342, 276, 342, 445, 283, 445, 444, 282, 444, 443, 295, 443, 442, 441, 295,
  442, 285, 441, 413, 417, 285, 413, 8, 417, 168, 193, 8, 168, 55, 193, 189,
  221, 55, 189, 65, 221, 222, 223, 65, 222, 52, 223, 224, 53, 224, 225, 46, 225,
  113, 124, 113, 226, 31, 226, 25, 228, 31, 25, 118, 228, 229, 101, 118, 119,
  50, 101, 36, 205, 36, 203, 206, 205, 203, 216, 206, 92, 57, 216, 186, 43, 57,
  61, 106, 43, 146, 182, 106, 91, 83, 182, 181, 18, 83, 84, 313, 18, 314, 406,
  313, 405, 335, 406, 321, 273, 335, 375, 287, 273, 291, 436, 287, 410, 426,
  436, 322, 425, 426, 423, 330, 425, 266, 347, 330, 348, 448, 347, 449, 261,
  448, 255, 446, 261, 255, 342, 446, 359, 445, 342, 467, 444, 445, 260, 443,
  444, 259, 442, 443, 258, 441, 442, 286, 413, 441, 414, 417, 413, 465, 168,
  417, 6, 193, 168, 6, 189, 193, 245, 221, 189, 190, 222, 221, 56, 223, 222, 28,
  224, 223, 29, 225, 224, 30, 113, 225, 247, 226, 113, 130, 25, 226, 130, 228,
  25, 110, 229, 228, 110, 118, 229, 119, 101, 119, 100, 36, 101, 142, 203, 36,
  129, 206, 203, 165, 92, 206, 165, 216, 92, 186, 57, 186, 61, 43, 61, 146, 106,
  146, 91, 182, 91, 181, 83, 181, 84, 18, 84, 17, 314, 18, 17, 313, 314, 405,
  406, 405, 321, 335, 321, 375, 273, 375, 291, 287, 291, 410, 436, 410, 322,
  426, 322, 391, 423, 426, 391, 425, 423, 266, 330, 266, 371, 348, 330, 329,
  347, 348, 449, 448, 449, 339, 255, 448, 339, 446, 255, 359, 342, 359, 467,
  445, 467, 260, 444, 260, 259, 443, 259, 257, 258, 443, 257, 442, 258, 286,
  441, 286, 414, 413, 414, 463, 465, 413, 464, 417, 465, 351, 6, 417, 351, 193,
  6, 122, 245, 193, 122, 189, 245, 244, 190, 189, 243, 221, 190, 56, 222, 56,
  28, 223, 28, 27, 29, 223, 27, 224, 29, 30, 225, 30, 247, 113, 247, 130, 25,
  130, 33, 110, 25, 7, 229, 110, 24, 119, 229, 230, 100, 119, 120, 101, 100,
  142, 36, 142, 129, 203, 129, 64, 165, 203, 98, 92, 165, 40, 186, 92, 185, 61,
  186, 185, 146, 61, 76, 91, 146, 77, 181, 91, 90, 84, 181, 85, 17, 84, 16, 314,
  17, 16, 405, 314, 315, 321, 405, 320, 375, 321, 307, 291, 375, 306, 410, 291,
  409, 322, 410, 409, 391, 322, 270, 423, 391, 327, 266, 423, 358, 371, 266,
  358, 330, 371, 329, 348, 329, 349, 449, 348, 450, 339, 449, 254, 255, 339,
  249, 359, 255, 263, 467, 359, 263, 260, 467, 466, 259, 260, 387, 257, 259,
  386, 258, 257, 385, 286, 258, 384, 414, 286, 398, 463, 414, 362, 413, 463,
  464, 465, 464, 357, 351, 465, 412, 6, 351, 197, 122, 6, 197, 245, 122, 188,
  244, 245, 188, 189, 244, 243, 190, 243, 133, 56, 190, 173, 28, 56, 157, 27,
  28, 158, 29, 27, 159, 30, 29, 160, 247, 30, 246, 130, 247, 33, 25, 33, 7, 110,
  7, 163, 24, 110, 163, 229, 24, 230, 119, 230, 120, 100, 120, 47, 142, 100,
  126, 129, 142, 209, 64, 129, 102, 203, 64, 98, 165, 98, 240, 40, 165, 39, 92,
  40, 185, 61, 185, 76, 146, 76, 62, 77, 146, 62, 91, 77, 96, 90, 91, 96, 181,
  90, 180, 85, 181, 180, 84, 85, 16, 314, 16, 315, 405, 315, 404, 320, 405, 404,
  321, 320, 325, 307, 321, 325, 375, 307, 292, 306, 375, 292, 291, 306, 409,
  322, 409, 270, 391, 270, 269, 327, 391, 460, 423, 327, 294, 358, 423, 294,
  371, 358, 429, 329, 371, 355, 349, 329, 277, 348, 349, 450, 449, 450, 254,
  339, 254, 390, 249, 339, 390, 255, 249, 263, 467, 263, 466, 260, 466, 388,
  387, 260, 388, 259, 387, 386, 257, 386, 385, 258, 385, 384, 286, 384, 398,
  414, 398, 362, 463, 362, 341, 464, 463, 453, 357, 464, 453, 465, 357, 412,
  351, 412, 419, 197, 351, 419, 122, 197, 196, 188, 122, 196, 244, 188, 128,
  243, 244, 233, 133, 243, 112, 190, 133, 173, 56, 173, 157, 28, 157, 158, 27,
  158, 159, 29, 159, 160, 30, 160, 161, 246, 30, 161, 247, 246, 33, 7, 33, 246,
  163, 7, 161, 24, 163, 144, 230, 24, 23, 120, 230, 231, 47, 120, 121, 100, 47,
  126, 142, 126, 209, 129, 209, 49, 102, 129, 49, 64, 102, 48, 98, 64, 235, 240,
  98, 235, 165, 240, 167, 39, 165, 167, 40, 39, 74, 185, 40, 184, 76, 185, 62,
  77, 62, 78, 96, 77, 78, 90, 96, 89, 180, 90, 89, 85, 180, 179, 16, 85, 15,
  315, 16, 15, 404, 315, 403, 320, 404, 319, 325, 320, 319, 307, 325, 308, 292,
  307, 308, 306, 292, 409, 270, 409, 408, 269, 270, 304, 391, 269, 393, 460,
  391, 393, 327, 460, 455, 294, 327, 455, 358, 294, 331, 429, 358, 279, 371,
  429, 355, 329, 355, 277, 349, 277, 350, 450, 349, 451, 254, 450, 253, 390,
  254, 373, 249, 390, 388, 263, 249, 466, 388, 466, 249, 387, 388, 390, 386,
  387, 373, 385, 386, 380, 384, 385, 380, 398, 384, 381, 362, 398, 382, 341,
  362, 382, 463, 341, 453, 357, 453, 350, 412, 357, 343, 419, 412, 399, 197,
  419, 195, 196, 197, 195, 188, 196, 174, 128, 188, 114, 244, 128, 233, 243,
  233, 112, 133, 112, 155, 173, 133, 155, 157, 173, 154, 158, 157, 153, 159,
  158, 153, 160, 159, 144, 161, 160, 163, 246, 161, 7, 144, 163, 160, 24, 144,
  23, 230, 23, 231, 120, 231, 121, 47, 121, 114, 126, 47, 217, 209, 126, 198,
  49, 209, 131, 102, 49, 48, 64, 48, 219, 235, 64, 219, 240, 235, 59, 167, 240,
  99, 39, 167, 37, 74, 39, 73, 40, 74, 183, 184, 40, 183, 185, 184, 62, 78, 62,
  184, 96, 78, 95, 89, 96, 95, 180, 89, 179, 85, 179, 86, 15, 85, 86, 315, 15,
  316, 403, 315, 316, 404, 403, 319, 325, 319, 324, 308, 325, 324, 292, 308,
  408, 409, 292, 408, 270, 408, 407, 304, 270, 407, 269, 304, 303, 393, 269,
  267, 460, 393, 328, 455, 460, 289, 294, 455, 439, 331, 294, 278, 358, 331,
  279, 429, 279, 360, 355, 429, 420, 277, 355, 437, 350, 277, 343, 349, 350,
  451, 450, 451, 253, 254, 253, 373, 390, 373, 387, 386, 373, 374, 380, 386,
  374, 384, 380, 381, 398, 381, 382, 341, 382, 381, 453, 341, 452, 350, 453,
  452, 357, 350, 343, 412, 343, 399, 419, 399, 248, 195, 419, 248, 196, 195, 3,
  174, 196, 3, 188, 174, 114, 128, 114, 121, 233, 128, 121, 112, 233, 232, 155,
  112, 154, 173, 155, 154, 157, 154, 153, 159, 153, 145, 144, 159, 145, 23, 144,
  145, 231, 23, 22, 121, 231, 232, 47, 114, 217, 126, 217, 198, 209, 198, 131,
  49, 131, 115, 48, 49, 115, 219, 48, 115, 235, 219, 166, 59, 235, 166, 240, 59,
  75, 99, 240, 75, 167, 99, 97, 37, 167, 164, 39, 37, 73, 74, 73, 42, 183, 74,
  191, 184, 183, 78, 95, 78, 191, 89, 95, 88, 179, 89, 80, 86, 179, 81, 15, 86,
  82, 316, 15, 312, 403, 316, 311, 319, 403, 310, 324, 319, 318, 308, 324, 415,
  408, 308, 407, 304, 407, 415, 303, 304, 272, 269, 303, 267, 393, 267, 164,
  328, 393, 326, 460, 328, 305, 289, 460, 305, 455, 289, 392, 439, 455, 392,
  294, 439, 278, 331, 278, 279, 360, 279, 344, 429, 360, 420, 355, 420, 437,
  277, 437, 343, 451, 350, 452, 253, 451, 252, 373, 253, 374, 380, 374, 252,
  381, 380, 256, 341, 381, 256, 452, 341, 256, 399, 343, 437, 248, 399, 456,
  195, 248, 5, 3, 195, 5, 174, 3, 236, 114, 174, 217, 233, 121, 232, 112, 232,
  26, 154, 112, 26, 153, 154, 26, 145, 153, 22, 23, 145, 22, 231, 22, 232, 198,
  217, 236, 131, 198, 134, 115, 131, 220, 219, 115, 218, 166, 219, 218, 59, 166,
  75, 99, 75, 60, 97, 99, 242, 167, 97, 164, 37, 164, 0, 73, 37, 72, 42, 73, 41,
  74, 42, 191, 183, 191, 78, 95, 191, 88, 89, 88, 80, 179, 80, 178, 81, 179,
  178, 86, 81, 87, 82, 86, 87, 15, 82, 14, 312, 15, 14, 316, 312, 317, 311, 316,
  317, 403, 311, 402, 310, 403, 402, 319, 310, 318, 324, 318, 415, 308, 415,
  407, 304, 415, 272, 303, 272, 271, 267, 303, 302, 164, 267, 0, 393, 164, 326,
  328, 326, 462, 305, 328, 290, 289, 305, 392, 439, 392, 438, 278, 439, 344,
  279, 278, 344, 360, 344, 440, 420, 360, 363, 437, 420, 456, 451, 452, 252,
  253, 252, 374, 380, 252, 256, 452, 256, 252, 399, 437, 456, 248, 456, 281, 5,
  248, 281, 3, 5, 51, 236, 3, 51, 174, 236, 217, 26, 232, 22, 153, 26, 22, 198,
  236, 134, 131, 134, 220, 115, 220, 218, 166, 218, 79, 75, 166, 60, 99, 60, 20,
  242, 99, 20, 97, 242, 141, 164, 97, 2, 37, 0, 72, 73, 72, 41, 42, 41, 80, 191,
  42, 88, 80, 88, 42, 178, 80, 41, 81, 178, 41, 87, 81, 38, 82, 87, 38, 14, 82,
  13, 312, 14, 13, 317, 312, 268, 311, 317, 268, 402, 311, 271, 310, 402, 271,
  318, 310, 272, 415, 318, 272, 271, 272, 310, 303, 271, 302, 267, 302, 0, 326,
  164, 2, 462, 326, 370, 328, 462, 250, 290, 328, 250, 305, 290, 392, 438, 392,
  309, 439, 438, 344, 440, 344, 438, 360, 440, 363, 420, 363, 456, 281, 456,
  363, 5, 281, 4, 51, 5, 4, 236, 51, 134, 220, 134, 45, 218, 220, 237, 79, 218,
  239, 166, 79, 60, 20, 60, 79, 242, 20, 241, 141, 242, 125, 97, 141, 2, 72, 0,
  11, 41, 72, 38, 81, 41, 38, 82, 38, 12, 13, 82, 12, 312, 13, 12, 268, 312, 12,
  311, 268, 271, 302, 271, 268, 0, 302, 11, 326, 2, 370, 462, 370, 354, 250,
  462, 461, 290, 250, 309, 392, 290, 309, 438, 309, 459, 440, 438, 457, 363,
  440, 275, 281, 363, 275, 4, 281, 275, 51, 4, 45, 134, 51, 45, 220, 45, 237,
  218, 237, 239, 79, 239, 238, 20, 79, 238, 241, 20, 238, 242, 241, 125, 141,
  125, 19, 2, 141, 94, 72, 11, 38, 12, 38, 11, 268, 12, 11, 302, 268, 11, 370,
  2, 94, 354, 370, 19, 462, 354, 461, 250, 461, 458, 309, 250, 458, 459, 309,
  458, 438, 459, 457, 440, 457, 275, 4, 275, 274, 45, 4, 44, 237, 45, 44, 239,
  237, 238, 241, 238, 237, 125, 241, 44, 19, 125, 1, 141, 19, 94, 370, 94, 19,
  354, 19, 1, 461, 354, 274, 458, 461, 457, 459, 458, 457, 275, 457, 274, 4,
  274, 1, 44, 4, 1, 237, 44, 241, 125, 44, 1, 354, 1, 274, 461, 274, 457,
];

let mesh_uv = [
  [499.976992607117, 652.534008026123],
  [500.02598762512196, 547.487020492554],
  [499.974012374878, 602.371990680695],
  [482.113003730774, 471.979022026062],
  [500.15097856521595, 527.155995368958],
  [499.909996986389, 498.252987861633],
  [499.523013830185, 401.06201171875],
  [289.712011814117, 380.764007568359],
  [499.95499849319503, 312.39801645278897],
  [499.987006187439, 269.91897821426403],
  [500.02300739288296, 107.05000162124601],
  [500.02300739288296, 666.234016418457],
  [500.01597404480003, 679.224014282227],
  [500.02300739288296, 692.348003387451],
  [499.976992607117, 695.277988910675],
  [499.976992607117, 705.93398809433],
  [499.976992607117, 719.385027885437],
  [499.976992607117, 737.019002437592],
  [499.967992305756, 781.370997428894],
  [499.81600046157797, 562.981009483337],
  [473.773002624512, 573.909997940063],
  [104.906998574734, 254.14097309112498],
  [365.92999100685097, 409.575998783112],
  [338.757991790771, 413.02502155304],
  [311.120003461838, 409.460008144379],
  [274.657994508743, 389.131009578705],
  [393.361985683441, 403.706014156342],
  [345.234006643295, 344.011008739471],
  [370.094001293182, 346.076011657715],
  [319.321990013123, 347.265005111694],
  [297.903001308441, 353.591024875641],
  [247.79200553894, 410.809993743896],
  [396.889001131058, 842.755019664764],
  [280.09799122810404, 375.599980354309],
  [106.310002505779, 399.955987930298],
  [209.92499589919998, 391.353011131287],
  [355.807989835739, 534.406006336212],
  [471.751004457474, 650.40397644043],
  [474.15500879287697, 680.191993713379],
  [439.785003662109, 657.229006290436],
  [414.617002010345, 666.54098033905],
  [450.374007225037, 680.860996246338],
  [428.770989179611, 682.690978050232],
  [374.971002340317, 727.805018424988],
  [486.716985702515, 547.628998756409],
  [485.300987958908, 527.395009994507],
  [257.764995098114, 314.490020275116],
  [401.223003864288, 455.172002315521],
  [429.818987846375, 548.614978790283],
  [421.351999044418, 533.740997314453],
  [276.895999908447, 532.056987285614],
  [483.370006084442, 499.586999416351],
  [337.21199631691, 282.882988452911],
  [296.391993761063, 293.242990970612],
  [169.294998049736, 193.813979625702],
  [447.580009698868, 302.609980106354],
  [392.390012741089, 353.887975215912],
  [354.490011930466, 696.784019470215],
  [67.30499863624601, 730.105042457581],
  [442.739009857178, 572.826027870178],
  [457.098007202148, 584.792017936707],
  [381.974011659622, 694.710969924927],
  [392.388999462128, 694.203019142151],
  [277.076005935669, 271.932005882263],
  [422.551989555359, 563.233017921448],
  [385.91900467872597, 281.364023685455],
  [383.10301303863497, 255.840003490448],
  [331.431001424789, 119.71402168273899],
  [229.923993349075, 232.002973556519],
  [364.500999450684, 189.113974571228],
  [229.622006416321, 299.540996551514],
  [173.287004232407, 278.747975826263],
  [472.87899255752603, 666.198015213013],
  [446.828007698059, 668.527007102966],
  [422.762006521225, 673.889994621277],
  [445.307999849319, 580.065965652466],
  [388.103008270264, 693.961024284363],
  [403.039008378983, 706.539988517761],
  [403.62900495529203, 693.953037261963],
  [460.041999816895, 557.139039039612],
  [431.158006191254, 692.366003990173],
  [452.181994915009, 692.366003990173],
  [475.387006998062, 692.366003990173],
  [465.828001499176, 779.190003871918],
  [472.328990697861, 736.225962638855],
  [473.08701276779203, 717.857003211975],
  [473.122000694275, 704.625964164734],
  [473.033010959625, 695.277988910675],
  [427.942007780075, 695.277988910675],
  [426.479011774063, 703.539967536926],
  [423.162013292313, 711.845993995667],
  [418.3090031147, 720.062971115112],
  [390.094995498657, 639.572978019714],
  [13.953999616206, 560.034036636353],
  [499.913990497589, 580.14702796936],
  [413.199990987778, 695.39999961853],
  [409.626007080078, 701.822996139526],
  [468.080013990402, 601.534962654114],
  [422.728985548019, 585.985004901886],
  [463.079988956451, 593.783974647522],
  [372.11999297142, 473.41400384903],
  [334.56200361251797, 496.073007583618],
  [411.671012639999, 546.965003013611],
  [242.17599630355798, 147.67599105835],
  [290.776997804642, 201.445996761322],
  [327.338010072708, 256.527006626129],
  [399.509996175766, 748.921036720276],
  [441.727995872498, 261.676013469696],
  [429.764986038208, 187.834024429321],
  [412.198007106781, 108.901023864746],
  [288.95500302314804, 398.952007293701],
  [218.93699467182202, 435.410976409912],
  [412.78201341629, 398.970007896423],
  [257.13500380516103, 355.440020561218],
  [427.684992551804, 437.960982322693],
  [448.339998722076, 536.936044692993],
  [178.560003638268, 457.55398273468],
  [247.308000922203, 457.193970680237],
  [286.267012357712, 467.674970626831],
  [332.827985286713, 460.712015628815],
  [368.755996227264, 447.206974029541],
  [398.963987827301, 432.654976844788],
  [476.410001516342, 405.806005001068],
  [189.241006970406, 523.923993110657],
  [228.962004184723, 348.950982093811],
  [490.72599411010697, 562.400996685028],
  [404.670000076294, 485.132992267609],
  [19.469000399113, 401.564002037048],
  [426.243007183075, 420.431017875671],
  [396.993011236191, 548.797011375427],
  [266.469985246658, 376.977026462555],
  [439.12100791931204, 518.95797252655],
  [32.313998788595, 644.356966018677],
  [419.054001569748, 387.15499639511097],
  [462.783008813858, 505.74696063995395],
  [238.978996872902, 779.744982719421],
  [198.22099804878198, 831.938028335571],
  [107.550002634525, 540.755033493042],
  [183.61000716686198, 740.257024765015],
  [134.409993886948, 333.683013916016],
  [385.764002799988, 883.153975009918],
  [490.967005491257, 579.378008842468],
  [382.384985685349, 508.572995662689],
  [174.399003386497, 397.67098426818796],
  [318.785011768341, 396.23498916626],
  [343.364000320435, 400.596976280212],
  [396.100014448166, 710.216999053955],
  [187.885001301765, 588.537991046906],
  [430.987000465393, 944.064974784851],
  [318.993002176285, 898.285031318665],
  [266.247987747192, 869.701027870178],
  [500.02300739288296, 190.576016902924],
  [499.976992607117, 954.452991485596],
  [366.16998910903897, 398.822009563446],
  [393.207013607025, 395.53701877594],
  [410.373002290726, 391.080021858215],
  [194.993004202843, 342.101991176605],
  [388.664990663528, 362.284004688263],
  [365.96199870109604, 355.970978736877],
  [343.364000320435, 355.356991291046],
  [318.785011768341, 358.34002494812],
  [301.414996385574, 363.156020641327],
  [58.132998645306, 319.07600164413503],
  [301.414996385574, 387.449026107788],
  [499.987989664078, 618.434011936188],
  [415.838003158569, 624.195992946625],
  [445.681989192963, 566.076993942261],
  [465.844005346298, 620.640993118286],
  [499.92299079894997, 351.523995399475],
  [288.71899843215897, 819.945991039276],
  [335.278987884521, 852.819979190826],
  [440.512001514435, 902.418971061707],
  [128.29400599002798, 791.940987110138],
  [408.771991729736, 373.893976211548],
  [455.606997013092, 451.801002025604],
  [499.877005815506, 908.990025520325],
  [375.436991453171, 924.192011356354],
  [114.21000212431, 615.0220036506649],
  [448.662012815475, 695.277988910675],
  [448.0200111866, 704.632043838501],
  [447.111994028091, 715.808033943176],
  [444.831997156143, 730.794012546539],
  [430.011987686157, 766.808986663818],
  [406.787008047104, 685.672998428345],
  [400.738000869751, 681.069016456604],
  [392.39999651908903, 677.703022956848],
  [367.855995893478, 663.918972015381],
  [247.923001646996, 601.333022117615],
  [452.769994735718, 420.849978923798],
  [436.39200925827, 359.887003898621],
  [416.164010763168, 368.713974952698],
  [413.385987281799, 692.366003990173],
  [228.018000721931, 683.571994304657],
  [468.26800704002403, 352.671027183533],
  [411.361992359161, 804.327011108398],
  [499.989002943039, 469.825029373169],
  [479.153990745544, 442.654013633728],
  [499.974012374878, 439.637005329132],
  [432.112008333206, 493.588984012604],
  [499.886006116867, 866.917014122009],
  [499.91300702095, 821.729004383087],
  [456.548988819122, 819.200992584229],
  [344.549000263214, 745.438992977142],
  [378.90899181366, 574.010014533997],
  [374.292999505997, 780.184984207153],
  [319.687992334366, 570.737957954407],
  [357.154995203018, 604.269981384277],
  [295.284003019333, 621.580958366394],
  [447.750002145767, 862.477004528046],
  [410.986006259918, 508.723020553589],
  [313.95098567009, 775.308012962341],
  [354.12800312042197, 812.552988529205],
  [324.548006057739, 703.992962837219],
  [189.096003770828, 646.299958229065],
  [279.776990413666, 714.65802192688],
  [133.8230073452, 682.700991630554],
  [336.768001317978, 644.733011722565],
  [429.883986711502, 466.521978378296],
  [455.527991056442, 548.622965812683],
  [437.114000320435, 558.896005153656],
  [467.287987470627, 529.924988746643],
  [414.712011814117, 335.219979286194],
  [377.04598903656, 322.777986526489],
  [344.107985496521, 320.15097141265903],
  [312.875986099243, 322.33202457428],
  [283.526003360748, 333.19002389907797],
  [241.245999932289, 382.785975933075],
  [102.986000478268, 468.762993812561],
  [267.612010240555, 424.560010433197],
  [297.879010438919, 433.175981044769],
  [333.433985710144, 433.878004550934],
  [366.427004337311, 426.115989685059],
  [396.012008190155, 416.69601202011097],
  [420.12101411819503, 410.22801399231],
  [7.5610000640149995, 480.777025222778],
  [432.949006557465, 569.517970085144],
  [458.638995885849, 479.089021682739],
  [473.466008901596, 545.744001865387],
  [476.087987422943, 563.830018043518],
  [468.47200393676803, 555.056989192963],
  [433.990985155106, 582.361996173859],
  [483.518004417419, 562.983989715576],
  [482.482999563217, 577.84903049469],
  [426.45001411438, 389.79899883270303],
  [438.998997211456, 396.49498462677],
  [450.06701350212103, 400.434017181396],
  [289.712011814117, 368.252992630005],
  [276.670008897781, 363.372981548309],
  [517.862021923065, 471.948027610779],
  [710.287988185883, 380.764007568359],
  [526.2269973754879, 573.909997940063],
  [895.0930237770079, 254.14097309112498],
  [634.069979190826, 409.575998783112],
  [661.242008209229, 413.02502155304],
  [688.880026340485, 409.460008144379],
  [725.341975688934, 389.131009578705],
  [606.630027294159, 403.70500087738],
  [654.766023159027, 344.011008739471],
  [629.905998706818, 346.076011657715],
  [680.678009986877, 347.265005111694],
  [702.096998691559, 353.591024875641],
  [752.21198797226, 410.804986953735],
  [602.918028831482, 842.862963676453],
  [719.901978969574, 375.599980354309],
  [893.692970275879, 399.95998144149803],
  [790.0819778442379, 391.35402441024803],
  [643.998026847839, 534.487962722778],
  [528.249025344849, 650.40397644043],
  [525.849997997284, 680.1910400390619],
  [560.214996337891, 657.229006290436],
  [585.384011268616, 666.54098033905],
  [549.625992774963, 680.860996246338],
  [571.22802734375, 682.691991329193],
  [624.852001667023, 728.09898853302],
  [513.050019741058, 547.281980514526],
  [515.09702205658, 527.251958847046],
  [742.246985435486, 314.507007598877],
  [598.631024360657, 454.97900247573904],
  [570.338010787964, 548.575043678284],
  [578.631997108459, 533.622980117798],
  [723.087012767792, 532.054007053375],
  [516.445994377136, 499.638974666595],
  [662.801027297974, 282.917976379395],
  [703.62401008606, 293.271005153656],
  [830.704987049103, 193.813979625702],
  [552.385985851288, 302.568018436432],
  [607.609987258911, 353.887975215912],
  [645.429015159607, 696.707010269165],
  [932.694971561432, 730.105042457581],
  [557.260990142822, 572.826027870178],
  [542.901992797852, 584.792017936707],
  [618.0260181427, 694.710969924927],
  [607.590973377228, 694.203019142151],
  [722.943007946014, 271.963000297546],
  [577.413976192474, 563.166975975037],
  [614.082992076874, 281.386971473694],
  [616.907000541687, 255.886018276215],
  [668.509006500244, 119.91399526596099],
  [770.092010498047, 232.020974159241],
  [635.536015033722, 189.248979091644],
  [770.39098739624, 299.556016921997],
  [826.722025871277, 278.755009174347],
  [527.121007442474, 666.198015213013],
  [553.171992301941, 668.527007102966],
  [577.238023281097, 673.889994621277],
  [554.691970348358, 580.065965652466],
  [611.896991729736, 693.961024284363],
  [596.96102142334, 706.539988517761],
  [596.370995044708, 693.953037261963],
  [539.958000183105, 557.139039039612],
  [568.841993808746, 692.366003990173],
  [547.818005084991, 692.366003990173],
  [524.61302280426, 692.366003990173],
  [534.089982509613, 779.141008853912],
  [527.670979499817, 736.225962638855],
  [526.912987232208, 717.857003211975],
  [526.877999305725, 704.625964164734],
  [526.966989040375, 695.277988910675],
  [572.058022022247, 695.277988910675],
  [573.521018028259, 703.539967536926],
  [576.83801651001, 711.845993995667],
  [581.691026687622, 720.062971115112],
  [609.944999217987, 639.909982681274],
  [986.046016216278, 560.034036636353],
  [586.7999792099, 695.39999961853],
  [590.372025966644, 701.822996139526],
  [531.915009021759, 601.536989212036],
  [577.268004417419, 585.934996604919],
  [536.915004253387, 593.786001205444],
  [627.542972564697, 473.352015018463],
  [665.585994720459, 495.950996875763],
  [588.353991508484, 546.862006187439],
  [757.824003696442, 147.67599105835],
  [709.249973297119, 201.507985591888],
  [672.684013843536, 256.581008434296],
  [600.408971309662, 749.00496006012],
  [558.26598405838, 261.672019958496],
  [570.303976535797, 187.870979309082],
  [588.165998458862, 109.044015407562],
  [711.045026779175, 398.952007293701],
  [781.069993972778, 435.405015945435],
  [587.247014045715, 398.931980133057],
  [742.869973182678, 355.445981025696],
  [572.1560120582579, 437.651991844177],
  [551.86802148819, 536.570012569427],
  [821.442008018494, 457.556009292603],
  [752.701997756958, 457.181990146637],
  [713.75697851181, 467.626988887787],
  [667.1130061149601, 460.672974586487],
  [631.101012229919, 447.15398550033603],
  [600.8620262146001, 432.473003864288],
  [523.481011390686, 405.627012252808],
  [810.7479810714719, 523.926019668579],
  [771.045982837677, 348.959028720856],
  [509.127020835876, 562.718033790588],
  [595.292985439301, 485.023975372314],
  [980.530977249146, 401.564002037048],
  [573.499977588654, 420.000016689301],
  [602.994978427887, 548.6879944801329],
  [733.529984951019, 376.977026462555],
  [560.611009597778, 519.016981124878],
  [967.685997486115, 644.356966018677],
  [580.985009670258, 387.160003185272],
  [537.728011608124, 505.385041236877],
  [760.966002941132, 779.752969741821],
  [801.778972148895, 831.938028335571],
  [892.440974712372, 540.76099395752],
  [816.350996494293, 740.260004997253],
  [865.594983100891, 333.68700742721603],
  [614.073991775513, 883.246004581451],
  [508.952975273132, 579.437971115112],
  [617.941975593567, 508.31604003906193],
  [825.608015060425, 397.674977779388],
  [681.214988231659, 396.23498916626],
  [656.635999679565, 400.596976280212],
  [603.900015354156, 710.216999053955],
  [812.08598613739, 588.539004325867],
  [568.01301240921, 944.564998149872],
  [681.007981300354, 898.285031318665],
  [733.752012252808, 869.701027870178],
  [633.830010890961, 398.822009563446],
  [606.792986392975, 395.53701877594],
  [589.659988880157, 391.062021255493],
  [805.015981197357, 342.108011245728],
  [611.3349795341489, 362.284004688263],
  [634.037971496582, 355.970978736877],
  [656.635999679565, 355.356991291046],
  [681.214988231659, 358.34002494812],
  [698.584973812103, 363.156020641327],
  [941.866993904114, 319.07600164413503],
  [698.584973812103, 387.449026107788],
  [584.177017211914, 624.107003211975],
  [554.318010807037, 566.076993942261],
  [534.153997898102, 620.64003944397],
  [711.217999458313, 819.975018501282],
  [664.629995822906, 852.871000766754],
  [559.0999722480769, 902.631998062134],
  [871.706008911133, 791.940987110138],
  [591.234028339386, 373.893976211548],
  [544.341027736664, 451.583981513977],
  [624.562978744507, 924.192011356354],
  [885.77002286911, 615.028977394104],
  [551.338016986847, 695.277988910675],
  [551.980018615723, 704.632043838501],
  [552.887976169586, 715.808033943176],
  [555.167973041534, 730.794012546539],
  [569.944024085999, 767.035007476807],
  [593.203008174896, 685.675978660583],
  [599.261999130249, 681.069016456604],
  [607.599973678589, 677.703022956848],
  [631.937980651855, 663.500010967255],
  [752.032995223999, 601.315021514893],
  [547.226011753082, 420.395016670227],
  [563.543975353241, 359.827995300293],
  [583.841025829315, 368.713974952698],
  [586.614012718201, 692.366003990173],
  [771.915018558502, 683.578014373779],
  [531.597018241882, 352.482974529266],
  [588.370978832245, 804.440975189209],
  [520.79701423645, 442.56502389907797],
  [567.984998226166, 493.479013442993],
  [543.282985687256, 819.254994392395],
  [655.317008495331, 745.514988899231],
  [621.0089921951289, 574.018001556396],
  [625.559985637665, 780.31200170517],
  [680.198013782501, 570.719003677368],
  [642.76397228241, 604.337990283966],
  [704.662978649139, 621.529996395111],
  [552.012026309967, 862.591981887817],
  [589.071989059448, 508.637011051178],
  [685.944974422455, 775.357007980347],
  [645.735025405884, 812.6400113105769],
  [675.342977046967, 703.978002071381],
  [810.858011245728, 646.304965019226],
  [720.12197971344, 714.666962623596],
  [866.151988506317, 682.704985141754],
  [663.187026977539, 644.596993923187],
  [570.082008838654, 466.325998306274],
  [544.561982154846, 548.375964164734],
  [562.758982181549, 558.784961700439],
  [531.987011432648, 530.140042304993],
  [585.271000862122, 335.177004337311],
  [622.952997684479, 322.77899980545],
  [655.896008014679, 320.163011550903],
  [687.132000923157, 322.345972061157],
  [716.4819836616521, 333.200991153717],
  [758.756995201111, 382.786989212036],
  [897.013008594513, 468.769013881683],
  [732.392013072968, 424.547016620636],
  [702.11398601532, 433.16298723220797],
  [666.52500629425, 433.866024017334],
  [633.504986763, 426.087975502014],
  [603.875994682312, 416.586995124817],
  [579.657971858978, 409.945011138916],
  [992.439985275269, 480.777025222778],
  [567.192018032074, 569.419980049133],
  [541.36598110199, 478.89900207519497],
  [526.564002037048, 546.118021011353],
  [523.913025856018, 563.830018043518],
  [531.5290093421941, 555.056989192963],
  [566.035985946655, 582.329034805298],
  [516.31098985672, 563.053965568542],
  [517.4720287323, 577.877044677734],
  [573.594987392426, 389.806985855103],
  [560.697972774506, 395.331978797913],
  [549.755990505219, 399.751007556915],
  [710.287988185883, 368.252992630005],
  [723.330020904541, 363.372981548309],
];

let points = [...mesh_uv];
let delaunay = new Delaunay(points);
let tri = delaunay.triangulate();
console.log('tri.length', tri.length);
// fs.writeJsonSync('tri.json', tri, { spaces: 2 });

function do_nits() {
  let nits = [];
  for (t of tri) {
    let index = mesh_uv.findIndex((pt) => {
      return pt[0] == t[0] && pt[1] == t[1];
    });
    // console.log('t=' + t + ' index=' + index);
    nits.push(index);
  }
  fs.writeJsonSync('nits.json', nits, { spaces: 2 });
  console.log('nits.length', nits.length);
}

function do_test() {
  let t = [0.007561000064015, 0.480777025222778];
  let index = mesh_uv.findIndex((pt) => {
    return pt[0] == t[0] && pt[1] == t[1];
  });
  console.log('t=' + t + ' index=' + index);
  console.log('mesh_uv[index]=' + mesh_uv[index]);
}

function do_mesh_up() {
  for (mes of mesh_uv) {
    mes[0] *= 1000;
    mes[1] *= 1000;
  }
  fs.writeJsonSync('mesh1000.json', mesh_uv, { spaces: 2 });
}

function do_sort_nits() {
  let nnits = [];
  for (let ii = 0; ii < mesh_nits.length; ii += 3) {
    nnits.push(ii);
  }
  nnits.sort((ai, bi) => {
    let ap = mesh_uv[mesh_nits[ai]];
    let bp = mesh_uv[mesh_nits[bi]];
    let rr = 0;
    if (ap[1] < bp[1]) rr = -1;
    else if (ap[1] > bp[1]) rr = 1;
    else if (ap[0] < bp[0]) rr = -1;
    else if (ap[0] > bp[0]) rr = 1;
    // else rr = 0;
    return rr;
  });
  let lips_dict = {};
  for (let ii of lips) lips_dict[ii] = 1;

  let nits_sorted = [];
  for (let ii = 0; ii < nnits.length; ii++) {
    let kk = nnits[ii];
    let mn0 = mesh_nits[kk];
    let mn1 = mesh_nits[kk + 1];
    let mn2 = mesh_nits[kk + 2];
    // if (lips_dict[mn0] && lips_dict[mn1] && lips_dict[mn2]) continue;
    nits_sorted.push(mn0);
    nits_sorted.push(mn1);
    nits_sorted.push(mn2);
  }
  write_it('nits_sorted.json', nits_sorted);
  console.log('nits_sorted.length', nits_sorted.length);
  // nits_sorted.length 2694
  // nits_sorted.length 2673
}

let lips = [
  78, 95, 88, 178, 87, 14, 317, 402, 318, 324, 308, 191, 80, 81, 82, 13, 312,
  311, 310, 415,
];

// lipsLowerInner: [78, 95, 88, 178, 87, 14, 317, 402, 318, 324, 308], // 11
// lipsUpperInner: [78, 191, 80, 81, 82, 13, 312, 311, 310, 415, 308], // 11
// lipsLowerOuter: [146, 91, 181, 84, 17, 314, 405, 321, 375, 291], // 10
// lipsUpperOuter: [61, 185, 40, 39, 37, 0, 267, 269, 270, 409, 291], // 11

// do_mesh_up();
// do_nits();

do_sort_nits();
